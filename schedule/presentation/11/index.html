

<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8" />
        <title>PyConFr 2014 | Presentation: Brood, une application web par des gens qui n&#39;y connaissent pas grand chose</title>
        

        
    <link href="/2014/static/pyconfr/css/style.css" rel="stylesheet">
    


        
            <!-- HTML5 shim, for IE6-8 support of HTML elements -->
            <!--[if lt IE 9]>
                <script src="/2014/static/pinax/js/html5shiv.js"></script>
            <![endif]-->
        

        
    <meta property="og:image" content="http://www.pycon.fr/2014_static/pyconfr/images/social.png" />
    <link href="http://www.pycon.fr/2014_static/img/favicon.ico" rel="shortcut icon" />
    <link rel='stylesheet' id='oswald-css'
     href='https://fonts.googleapis.com/css?family=Oswald&#038;ver=3.3.2'
     type='text/css' media='all' />
    <script src="/2014/static/pinax/js/jquery.js"></script>
    <link href="/2014/static/markitup/skins/simple/style.css" type="text/css" media="screen" rel="stylesheet" />
<link href="/2014/static/markitup/sets/markdown/style.css" type="text/css" media="screen" rel="stylesheet" />


<script type="text/javascript" src="/2014/static/markitup/ajax_csrf.js"></script>
<script type="text/javascript" src="/2014/static/markitup/jquery.markitup.js"></script>
<script type="text/javascript" src="/2014/static/markitup/sets/markdown/set.js"></script>


    

    </head>
    <body class="" id="">
        <div class="">

            
    <div class="container">
        <header id="masthead">
            <div class="pull-right">
                <ul class="nav nav-pills">
                    
                        <li>
                            <a href="../../../account/login/index.html">Connexion</a>
                        </li>
                        <li>
                            <a href="../../../account/signup/index.html">Inscription</a>
                        </li>
                    
                </ul>
            </div>

            <h1 class="nodisplay"><a href="../../../index.html">PyConFr 2014</a></h1>
            <h2 class="nodisplay"><a href="../../../index.html">Lyon, <span class="conf-date">October 25-28</span></a></h2>
            <a href="../../../index.html"><img src="/2014/static/pyconfr/images/banner.png" alt="PyConFR 2014"/></a>
        </header>
        <div class="navbar">
            <div class="navbar-inner">
                
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <div class="nav-collapse">
                        
                            
<ul class="nav">
    
        <li class=" ">
            <a href="index.html#unresolved" >
                Accueil
                
            </a>
            
        </li>
    
        <li class=" ">
            <a href="../../../schedule.html" >
                Agenda
                
            </a>
            
        </li>
    
        <li class="dropdown ">
            <a href="index.html#" class="dropdown-toggle" data-toggle="dropdown">
                Infos pratiques
                <b class="caret"></b>
            </a>
            
                
<ul class="dropdown-menu">
    
        <li >
            <a href="index.html#unresolved" >Lieu</a>
        </li>
    
        <li >
            <a href="../../../se-loger/index.html" >Se loger</a>
        </li>
    
        <li >
            <a href="../../../wifi.html" >Wifi</a>
        </li>
    
        <li >
            <a href="../../../soiree.html" >Soirée</a>
        </li>
    
        <li >
            <a href="../../../dejeuner.html" >Déjeuner</a>
        </li>
    
        <li >
            <a href="../../../guide.html" >Guide</a>
        </li>
    
</ul>
            
        </li>
    
        <li class="dropdown ">
            <a href="index.html#" class="dropdown-toggle" data-toggle="dropdown">
                Sponsors
                <b class="caret"></b>
            </a>
            
                
<ul class="dropdown-menu">
    
        <li >
            <a href="index.html#unresolved" >PyConFr 2014 Sponsors</a>
        </li>
    
        <li >
            <a href="index.html#unresolved" >Devenez sponsor !</a>
        </li>
    
</ul>
            
        </li>
    
        <li class="dropdown ">
            <a href="index.html#" class="dropdown-toggle" data-toggle="dropdown">
                Conférenciers
                <b class="caret"></b>
            </a>
            
                
<ul class="dropdown-menu">
    
        <li >
            <a href="../../../speaker.html" >Appel à contribution</a>
        </li>
    
        <li >
            <a href="../../../bourse/index.html" >Bourse</a>
        </li>
    
        <li >
            <a href="../../../poster.html" >Poster: Q&amp;A</a>
        </li>
    
        <li >
            <a href="../../../code-de-conduite.html" >Code de conduite</a>
        </li>
    
        <li >
            <a href="../../../sprints.html" >Sprints</a>
        </li>
    
</ul>
            
        </li>
    
        <li class=" ">
            <a href="index.html#unresolved" >
                À propos
                
            </a>
            
        </li>
    
</ul>
                        
                    </div>
                
            </div>
        </div>
    </div>


            
    <div class="container">
        


        
            
        

        
            <div class="row">
                <div class="span9">
                    
    
        <h4>
            dimanche
            12:00:00&ndash;12:30:00
        </h4>
    
    <h2>Brood, une application web par des gens qui n&#39;y connaissent pas grand chose</h2>

    <h4>
        
            <a href="../../../speaker/profile/81/index.html">David Cournapeau</a>
    </h4>

    <dl class="dl-horizontal">
        <dt>Audience level:</dt>
        <dd style="margin-bottom: 0;">Intermediate</dd>
    </dl>

    <h3>Description</h3>

    <div class="description"><p>Enthought gère une distribution python appelée Canopy/ex-EPD. Nous raconterons l'histoire de nos efforts pour remplacer les scripts/hacks pour la distribution de ces paquets par une application web, ce qui a marché, et ce qui n'a pas marché. Nous parlerons de nos efforts (avortés) pour utiliser asyncio, de nos problèmes avec eventlet, et aussi de qui a marché (nginx, SQLAlchemy, locust).</p></div>

    <h3>Abstract</h3>

    <div class="abstract"><p>La présentation sera organisée comme suivant</p>
<h4>Introduction</h4>
<p>Brève description du projet, simple démonstration.</p>
<h4>Description de l'architecture asynchrone</h4>
<p>L'architecture initiale de l'application a jusqu'à récemment été basée sur un processus "backend" utilisant asyncio + SQLAlchemy, avec des "workers" "front end" basés sur flask. Les processus "backend" et "frontend" communiquent au travers de 0mq + un protocole spécifique RPC.</p>
<p>Cette architecture était justifiée sur la base des problèmes spécifiques à l'application (génération de gros payload json, contraintes de vérification de gros fichiers en background, nombre/taille de fichier atteignant plusieurs dizaines de Go, etc...), et pour forcer une stricte séparation entre les parties sans état ("stateless") et avec état ("stateful").</p>
<p>Nous détaillerons aussi comment nous avons pu utiliser nginx pour non seulement servir de gros fichiers, mais aussi de manière moins classique accepter, et calculer les checksums à la volée de manière à ce qu'aucun processus python n'ait besoin de lire le fichier en mémoire.</p>
<h4>Architecture courante</h4>
<p>Des tests ont montre que l'architecture initiale n'était pas aussi robuste qu'espéré. En particulier, le processus "backend" causait des erreurs de type "segfault" régulières qui se sont révélées difficiles à réparer.</p>
<p>L'architecture a été simplifiée pour utiliser celery pour gérer les "jobs" en tâche de fond, et n'utiliser que des processus flask derrière nginx+gunicorn. L'architecture générale séparant les parties stateful/stateless a été conservée, mais sans une separation stricte entre processus.</p>
<h3>Conclusion</h3>
<p>Nous conclurons la presentation avec quelques chiffres de performance.</p></div>

                </div>
                <div class="span3">
                    
                        





<h2 style="margin: 0;">Sponsors</h2>

<div class="sponsor-list">
    
        
            <h3 style="margin: 0;">Gold</h3>
            
            
                <div style="margin: 0.5em 0;">
                    <a href="http://www.hexack.fr/">
                        <img src="/2014/media/sponsor_files/hexack.logo.389x68.png.100x60_q85.png" alt="HexACK" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="http://www.akretion.com/">
                        <img src="/2014/media/sponsor_files/akretion_1.png.100x60_q85.png" alt="Akretion" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="https://www.askindev.com/">
                        <img src="/2014/media/sponsor_files/askindev-logo.png.100x60_q85.png" alt="ASK&#39;interactive" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="http://www.yaal.fr/">
                        <img src="/2014/media/sponsor_files/yaal_5.png.100x60_q85.png" alt="Yaal" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="https://flmsn.univ-lyon1.fr/">
                        <img src="/2014/media/sponsor_files/logoFLMSNHD.png.100x60_q85.png" alt="Fédération Lyonnaise de Modélisation et Sciences Numériques" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="http://sciences.univ-lyon1.fr/">
                        <img src="/2014/media/sponsor_files/logoFSToffCMJN300dpiPt.jpg.100x60_q85.jpg" alt="Faculté des Sciences et Technologies de l&#39;Université Lyon 1" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="https://www.alwaysdata.com/">
                        <img src="/2014/media/sponsor_files/alwaysdata.png.100x60_q85.png" alt="alwaysdata" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="http://xcg-consulting.fr/">
                        <img src="/2014/media/sponsor_files/logo_XCG-1.png.100x60_q85.png" alt="XCG Consulting" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="https://www.unlish.com/">
                        <img src="/2014/media/sponsor_files/LogoClean_vert.png.100x60_q85.png" alt="UNLISH" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="http://www.clever-cloud.com/">
                        <img src="/2014/media/sponsor_files/Clevercloud-logo_large.png.100x60_q85.png" alt="Clever Cloud" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="http://bearstech.com/">
                        <img src="/2014/media/sponsor_files/bearstech_HD.png.100x60_q85.png" alt="Bearstech" />
                    </a>
                </div>
            
        
    
        
            <h3 style="margin: 0;">Bronze</h3>
            
            
                <div style="margin: 0.5em 0;">
                    <a href="http://anybox.fr/">
                        <img src="/2014/media/sponsor_files/anybox_carre.250_1.png.100x60_q85.jpg" alt="Anybox" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="http://www.people-doc.fr/">
                        <img src="/2014/media/sponsor_files/logo_novapost_official_web.jpg.100x60_q85.jpg" alt="Novapost" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="http://www.redhat.com/">
                        <img src="/2014/media/sponsor_files/red_ha.png.100x60_q85.png" alt="Red Hat" />
                    </a>
                </div>
            
        
    
        
            <h3 style="margin: 0;">Partenaire</h3>
            
            
                <div style="margin: 0.5em 0;">
                    <a href="http://fst-informatique.univ-lyon1.fr/">
                        <img src="/2014/media/sponsor_files/logo-fst-info-signature-couleur-72dpi.png.100x60_q85.png" alt="Département informatique de la Faculté des Sciences et Technologie" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="https://liris.cnrs.fr/presentation/presentation-du-laboratoire">
                        <img src="/2014/media/sponsor_files/LirisLogo.png.100x60_q85.png" alt="LIRIS" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="http://boutique.ed-diamond.com/">
                        <img src="/2014/media/sponsor_files/logo_LM_1.png.100x60_q85.png" alt="Éditions Diamond" />
                    </a>
                </div>
            
                <div style="margin: 0.5em 0;">
                    <a href="http://kozea.org/">
                        <img src="/2014/media/sponsor_files/kozea_1.png.100x60_q85.png" alt="Kozea" />
                    </a>
                </div>
            
        
    
</div>

                    
                </div>
            </div>
        
    </div>

        </div>

        
    
    <script src="/2014/static/bootstrap/js/bootstrap.js"></script>
    <script src="/2014/static/pinax/js/theme.js"></script>
    <script type="text/javascript">
        $(function() {
            $("#logout_link").on("click", function(e) {
                var form = $($(this).data("form-submit"));
                form.submit();
                return false;
            });
            $(".required-field").prepend("<span style='color:red;'>* </div>");
        });
    </script>
    


        
            
        
    </body>
</html>
